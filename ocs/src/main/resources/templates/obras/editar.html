<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Editar Obra</title>
    <!-- CSS IDÊNTICO AO CADASTRAR -->
</head>

<body>

<header>
    <h1>OCS.EUC - Observatório da Comunidade Surda</h1>
</header>

<nav>
    <a th:href="@{/}">Início</a>
    <a th:href="@{/obras}">Obras</a>
    <a th:href="@{/autoras}">Autoras</a>
</nav>

<section class="section">
    <h2>Editar Obra</h2>

    <form th:action="@{/obras/editar/{id}(id=${obra.id})}"
          th:object="${obra}" method="post">

        <label>Título</label>
        <input type="text" th:field="*{titulo}">

        <label>Resumo</label>
        <textarea th:field="*{resumo}"></textarea>

        <label>Ano</label>
        <input type="number" th:field="*{anoPublicacao}">

        <label>Categoria</label>
        <select th:field="*{categoria}">
            <option th:each="cat : ${categorias}"
                    th:value="${cat}"
                    th:text="${cat.nome}">
            </option>
        </select>

        <hr>

        <h3>Autoras</h3>

        <a th:href="@{/autoras/cadastrar}" class="btn btn-sec">
            + Cadastrar Autora
        </a>

        <div th:each="autora : ${autoras}">
            <label>
                <input type="checkbox"
                       name="autorasIds"
                       th:value="${autora.id}"
                       th:checked="${autorasSelecionadas.contains(autora.id)}">
                <span th:text="${autora.nome}"></span>
            </label>
        </div>

        <br>

        <button type="submit" class="btn">Atualizar</button>

    </form>
</section>

<footer>
    <p>© 2025 Observatório da Comunidade Surda — IFBA Euclides da Cunha</p>
</footer>

</body>
</html>
